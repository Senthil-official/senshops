<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My E-commerce Store</title>
    <link rel="stylesheet" href="style.css">
    <style>
body {
    font-family: sans-serif;
    margin: 0;
    background-color: #f4f4f4;
    color: #333;
}

header {
    background-color: #333;
    color: #fff;
    padding: 1em 0;
    text-align: center;
}

#productList {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    padding: 20px;
    gap: 20px; /* Adds space between product cards */
}

.product-card {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    width: 250px; /* Adjust as needed */
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
}

.product-card img {
    max-width: 100%;
    height: 150px; /* Fixed height for images */
    object-fit: cover; /* Ensures images cover the area without distortion */
    border-bottom: 1px solid #eee;
    margin-bottom: 10px;
    border-radius: 4px;
}

.product-card h3 {
    margin: 10px 0;
    font-size: 1.2em;
}

.product-card .price {
    color: #007bff; /* Blue color for price */
    font-weight: bold;
    margin-bottom: 10px;
}

.product-card .description {
    font-size: 0.9em;
    color: #666;
    margin-bottom: 15px;
    min-height: 40px; /* Give some space for description */
}

.buy-button {
    background-color: #28a745; /* Green button */
    color: white;
    border: none;
    padding: 10px 15px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin-top: auto; /* Pushes button to the bottom of the card */
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.3s ease;
}

.buy-button:hover {
    background-color: #218838; /* Darker green on hover */
}

.loading {
    text-align: center;
    width: 100%;
    padding: 20px;
    font-size: 1.2em;
}

footer {
    text-align: center;
    padding: 20px;
    background-color: #333;
    color: #fff;
    margin-top: 20px;
}
      </style>
</head>
<body>
    <header>
        <h1>Our Products</h1>
    </header>
    <main id="productList">
        <div class="loading">Loading products...</div>
    </main>
    <footer>
        <p>&copy; 2025 My Store</p>
    </footer>
    <script src="script.js"></script>
</body>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const productList = document.getElementById('productList');
    const loadingIndicator = document.querySelector('.loading');

    // !!! IMPORTANT: Replace with your Google Apps Script Web App URL !!!
    const appsScriptURL = 'https://script.google.com/macros/s/AKfycbzPw9TM9r-GZL3KxYZdT9wt8J4KjFtOPaHpfIVvmCKTsXeDRaVR31bTUWBuGudn4YE/exec';
    const yourWhatsAppNumber = '919360291050'; // e.g., '911234567890' (include country code without '+' or '00')

    async function fetchProducts() {
        try {
            const response = await fetch(appsScriptURL);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const products = await response.json();
            displayProducts(products);
        } catch (error) {
            console.error("Error fetching products:", error);
            productList.innerHTML = '<p>Failed to load products. Please try again later.</p>';
        } finally {
            if (loadingIndicator) {
                loadingIndicator.style.display = 'none';
            }
        }
    }

    function displayProducts(products) {
        if (!products || products.length === 0) {
            productList.innerHTML = '<p>No products found.</p>';
            return;
        }

        products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.classList.add('product-card');

            const productImage = document.createElement('img');
            productImage.src = product.ImageURL || 'https://via.placeholder.com/150?text=No+Image'; // Fallback image
            productImage.alt = product.ProductName;

            const productName = document.createElement('h3');
            productName.textContent = product.ProductName;

            const productPrice = document.createElement('p');
            productPrice.classList.add('price');
            productPrice.textContent = `Price: ₹${product.Price}`; // Assuming price is in INR

            const productDescription = document.createElement('p');
            productDescription.classList.add('description');
            productDescription.textContent = product.Description || '';

            const buyButton = document.createElement('button');
            buyButton.classList.add('buy-button');
            buyButton.textContent = 'Buy on WhatsApp';
            buyButton.addEventListener('click', () => {
                // Construct the WhatsApp message
                const message = `Hi, I'm interested in buying the product:
Product Name: ${product.ProductName}
Product ID: ${product.ProductID}
Price: ₹${product.Price}`;

                // Encode the message for the URL
                const encodedMessage = encodeURIComponent(message);

                // Create the WhatsApp redirect URL
                const whatsappURL = `https://wa.me/${919360291050}?text=${testing}`;

                // Redirect the user
                window.open(whatsappURL, '_blank');
            });

            productCard.appendChild(productImage);
            productCard.appendChild(productName);
            productCard.appendChild(productPrice);
            productCard.appendChild(productDescription);
            productCard.appendChild(buyButton);
            productList.appendChild(productCard);
        });
    }

    fetchProducts();
});
</script>
</html>